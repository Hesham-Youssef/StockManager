CREATE TABLE IF NOT EXISTS stock (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(255) UNIQUE NOT NULL,
  description VARCHAR(1000),
  current_price DECIMAL(19,4) NOT NULL,
  last_update TIMESTAMP NOT NULL
);

CREATE TABLE IF NOT EXISTS stock_exchange (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(255) UNIQUE NOT NULL,
  description VARCHAR(1000),
  live_in_market BOOLEAN NOT NULL
);

CREATE TABLE IF NOT EXISTS stock_exchange_stock (
  exchange_id BIGINT NOT NULL,
  stock_id BIGINT NOT NULL,
  PRIMARY KEY (exchange_id, stock_id),
  FOREIGN KEY (exchange_id) REFERENCES stock_exchange(id) ON DELETE CASCADE,
  FOREIGN KEY (stock_id) REFERENCES stock(id) ON DELETE CASCADE
);
